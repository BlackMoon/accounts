!function(t){"use strict";function a(t,a,e){return new BootstrapDialog({buttons:[{action:function(t){t.close()},label:"Ok"}],message:t,title:a,type:e}).open()}t.extend(BootstrapDialog,{confirm:function(){var a={},e={type:BootstrapDialog.TYPE_PRIMARY,title:null,message:null,closable:!1,draggable:!1,btnCancelLabel:BootstrapDialog.DEFAULT_TEXTS.CANCEL,btnCancelClass:null,btnOKLabel:BootstrapDialog.DEFAULT_TEXTS.OK,btnOKClass:null,callback:null};a="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?t.extend(!0,e,arguments[0]):t.extend(!0,e,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),null===a.btnOKClass&&(a.btnOKClass=["btn",a.type.split("-")[1]].join("-"));var n=new BootstrapDialog(a);return n.setData("callback",a.callback),n.addButton({label:a.btnOKLabel,cssClass:a.btnOKClass,action:function(t){return"function"==typeof t.getData("callback")&&t.getData("callback").call(this,!0)===!1?!1:t.close()}}),n.addButton({label:a.btnCancelLabel,cssClass:a.btnCancelClass,action:function(t){return"function"==typeof t.getData("callback")&&t.getData("callback").call(this,!1)===!1?!1:t.close()}}),n.open()},danger:function(t){a(t,"Ошибка",BootstrapDialog.TYPE_DANGER)},info:function(t){a(t,"Информация",BootstrapDialog.TYPE_INFO)},warning:function(t){a(t,"Внимание",BootstrapDialog.TYPE_WARNING)}})}(jQuery);var $divBody,$imgLoader;$(function(){$divBody=$("div.body"),$imgLoader=$("#imgLoader")}),getView=function(t){$.ajax({url:t,beforeSend:function(){$imgLoader.show()},complete:function(t,a){$imgLoader.hide(),"success"===a&&($divBody.html(t.responseText),$.validator.unobtrusive.parse($divBody))}})},onBegin=function(t,a){var e=0;$(this).find(":input:not([type=hidden])").each(function(t,a){var n=$(a);if(n.attr("data-encrypt")){for(var o=n.val(),l=o.length,s="",i=0;l>i;++i)s+=String.fromCharCode(128^o.charCodeAt(i));n.val(s),e=1}}),e&&(a.data=$(this).serialize()),this.submit.disabled=!0},onComplete=function(t,a){this.submit.disabled=!1;var e=t.responseJSON;if("success"===a){var n=this;switch(e.status){case LoginStatus.Success:window.location=e.returnUrl;break;case LoginStatus.Expired:BootstrapDialog.warning(e.message),getView("/ui/change?id="+$(n.SignInId).val());break;case LoginStatus.Expiring:BootstrapDialog.confirm({btnOKLabel:"Да",btnCancelLabel:"Нет",callback:function(t){t===!0?getView("/ui/change?id="+$(n.SignInId).val()):window.location=e.returnUrl},message:e.message,title:"Вопрос",type:BootstrapDialog.TYPE_INFO});break;default:BootstrapDialog.danger(e.message)}}else BootstrapDialog.danger(e.message)};